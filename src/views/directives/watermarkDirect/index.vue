<template>
  <flex-card>
    <div class="base-warp">
      <div class="over-card">
        <div class="water-mark">
          <span class="text">æ°´å°æŒ‡ä»¤ ğŸ‡ğŸ‡ğŸ‡ğŸ“ğŸ“ğŸ“</span>
          <el-alert
            title="é€šè¿‡è°ƒç”¨ <hook>ï¼Œå¼€å¯æˆ–å…³é—­æ°´å°ï¼Œæ”¯æŒå±€éƒ¨ã€å…¨å±€ã€è‡ªå®šä¹‰æ ·å¼ï¼ˆé¢œè‰²ã€é€æ˜åº¦ã€å­—ä½“å¤§å°ã€å­—ä½“ã€å€¾æ–œè§’åº¦ç­‰ï¼‰ï¼Œå¹¶è‡ªå¸¦é˜²å¾¡ï¼ˆé˜²åˆ ã€é˜²éšè—ï¼‰å’Œè‡ªé€‚åº”åŠŸèƒ½"
            type="warning"
            :closable="false"
          />
          <div ref="localRef" class="local" />
          <el-button-group>
            <el-button type="primary" @click="setWatermark('å±€éƒ¨æ°´å°', { color: '#409eff' })">åˆ›å»ºå±€éƒ¨æ°´å°</el-button>
            <el-button type="warning" @click="setWatermark('æ²¡æœ‰é˜²å¾¡åŠŸèƒ½çš„å±€éƒ¨æ°´å°', { color: '#e6a23c', defense: false })">
              å…³é—­é˜²å¾¡åŠŸèƒ½
            </el-button>
            <el-button type="danger" @click="clearWatermark">æ¸…é™¤å±€éƒ¨æ°´å°</el-button>
          </el-button-group>
          <el-button-group>
            <el-button type="primary" @click="setGlobalWatermark('å…¨å±€æ°´å°', { color: '#409eff' })">åˆ›å»ºå…¨å±€æ°´å°</el-button>
            <el-button type="warning" @click="setGlobalWatermark('æ²¡æœ‰é˜²å¾¡åŠŸèƒ½çš„å…¨å±€æ°´å°', { color: '#e6a23c', defense: false })">
              å…³é—­é˜²å¾¡åŠŸèƒ½
            </el-button>
            <el-button type="danger" @click="clearGlobalWatermark">æ¸…é™¤å…¨å±€æ°´å°</el-button>
          </el-button-group>
        </div>
      </div>
    </div>
  </flex-card>
</template>

<script setup lang="ts" name="WatermarkDirect">
import { ref } from "vue"
import { useWatermark } from "@/hooks/useWatermark"

const localRef = ref<HTMLElement | null>(null)
const { setWatermark, clearWatermark } = useWatermark(localRef)
const { setWatermark: setGlobalWatermark, clearWatermark: clearGlobalWatermark } = useWatermark()
</script>

<style scoped lang="scss">
.water-mark {
  display: flex;
  flex-direction: column;
  align-items: center;
  height: calc(100vh - 128px);

  .text {
    margin: 20px 0 30px;
    font-size: 23px;
    font-weight: bold;
    color: var(--el-text-color-regular);
  }

  .local {
    width: 100%;
    height: 30vh;
    border: 2px dashed var(--el-color-primary);
    margin: 20px 0;
  }

  :deep(.el-button-group) {
    margin: 0 12px 12px 0;
  }
}
</style>
